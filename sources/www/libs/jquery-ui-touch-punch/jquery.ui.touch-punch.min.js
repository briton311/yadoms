/*!
 * jQuery UI Touch Punch Fork 0.4.0 -> https://github.com/ivanmoralesv/jquery-ui-touch-punch
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','jquery-ui/mouse'],factory)}else{factory(jQuery)}}(function($){$.support.touch='ontouchend' in document||'onpointerdown' in document||'onMSPointerDown' in document;if(!$.support.touch){return}
var mouseProto=$.ui.mouse.prototype,_mouseInit=mouseProto._mouseInit,_mouseDestroy=mouseProto._mouseDestroy,touchHandled,touchTimer,dragIgnoreTime=150,dragIgnoreDistance=5,longTapTime=750;function simulateMouseEvent(event,simulatedType){if(event.originalEvent.touches.length>1){return}
var touch=event.originalEvent.changedTouches[0],simulatedEvent=document.createEvent('MouseEvents');if($(touch.target).is("input")||$(touch.target).is("textarea")){event.stopPropagation()}else{event.preventDefault()}
simulatedEvent.initMouseEvent(simulatedType,!0,!0,window,1,touch.screenX,touch.screenY,touch.clientX+$(window).scrollLeft(),touch.clientY+$(window).scrollTop(),!1,!1,!1,!1,0,null);event.target.dispatchEvent(simulatedEvent)}
mouseProto._touchStart=function(event){var self=this,touch=event.originalEvent.changedTouches[0];self._touchMoved=!1;self._touchStartTime=new Date().getTime();self._touchStartX=touch.clientX;self._touchStartY=touch.clientY;if(touchHandled||!self._mouseCapture(touch)){return}
touchHandled=!0;simulateMouseEvent(event,'mouseover');simulateMouseEvent(event,'mousemove');simulateMouseEvent(event,'mousedown');touchTimer=setTimeout(function(){if(!self._touchMoved){event.longTap=!0;self._touchEnd(event)}},longTapTime)};mouseProto._touchMove=function(event){if(!touchHandled){return}
var touch=event.originalEvent.changedTouches[0];var holdingDownTime=new Date().getTime()-this._touchStartTime,movedX=Math.abs(touch.clientX-this._touchStartX),movedY=Math.abs(touch.clientY-this._touchStartY);if(holdingDownTime>dragIgnoreTime||movedX>dragIgnoreDistance||movedY>dragIgnoreDistance){this._touchMoved=!0}
simulateMouseEvent(event,'mousemove')};mouseProto._touchEnd=function(event){if(!touchHandled){return}
simulateMouseEvent(event,'mouseup');simulateMouseEvent(event,'mouseout');if(!this._touchMoved){if(event.longTap){simulateMouseEvent(event,'contextmenu')}else{simulateMouseEvent(event,'click')}}
clearTimeout(touchTimer);touchHandled=!1};mouseProto._mouseInit=function(){var self=this;self.element.on({'touchstart':$.proxy(self,'_touchStart'),'touchmove':$.proxy(self,'_touchMove'),'touchend':$.proxy(self,'_touchEnd')});if(navigator.userAgent.match("MSIE")){self.element.css('-ms-touch-action','none')}
_mouseInit.call(self)};mouseProto._mouseDestroy=function(){var self=this;self.element.off({'touchstart':$.proxy(self,'_touchStart'),'touchmove':$.proxy(self,'_touchMove'),'touchend':$.proxy(self,'_touchEnd')});_mouseDestroy.call(self)};return $}))